{% extends 'webapp/base.html' %}
{% load staticfiles %}

{% block title_block %}Notifications{% endblock %}

{% block body_block %}
<div class="notifications-container">
  <h2 class="section-title">ðŸ”” Notifications</h2>

  {% if notifications %}
    <div class="notification-grid">
      {% for note in notifications %}
        {% with forloop.counter0 as index %}
          {% if note.event %}
            <a href="{% url 'webapp:event_detail' note.event.id %}" class="notification-card color-{{ index|divisibleby:"5" }}">
              <div class="notif-header">
                <span class="notif-from">{{ note.sender.username }}</span>
                <span class="notif-time">{{ note.timestamp|date:"d M, H:i" }}</span>
              </div>
              <div class="notif-message">{{ note.message }}</div>
              <div class="notif-footer">ðŸ“Œ Click to view event</div>
            </a>
          {% else %}
            <div class="notification-card color-{{ index|divisibleby:"5" }}">
              <div class="notif-header">
                <span class="notif-from">{{ note.sender.username }}</span>
                <span class="notif-time">{{ note.timestamp|date:"d M, H:i" }}</span>
              </div>
              <div class="notif-message">{{ note.message }}</div>
              <div class="notif-footer text-muted">No event linked</div>
            </div>
          {% endif %}
        {% endwith %}
      {% endfor %}
    </div>
  {% else %}
    <p>No notifications yet.</p>
  {% endif %}
</div>
{% endblock %}
