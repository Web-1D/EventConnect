{% extends 'webapp/base.html' %}

{% block title_block %}
{{ event.title }}
{% endblock %}

{% block body_block %}
<h2>{{ event.title }}</h2>

<p><strong>Date:</strong> {{ event.date|date:"Y-m-d H:i" }}</p>
<p><strong>Location:</strong> {{ event.location }}</p>
<p><strong>Description:</strong> {{ event.description }}</p>
<p><strong>Category:</strong> <a href="{% url 'webapp:categories' event.category.name %}">{{ event.category.name }}</a></p>


{% if event.location %}
    <h3>Location Preview</h3>
    <iframe
        width="100%"
        height="400"
        frameborder="0"
        style="border:0"
        src="{{ event.google_maps_link|add:'&output=embed' }}"
        allowfullscreen>
    </iframe>

{% endif %}




{% if user.is_authenticated and user.role == 'organiser' and user == event.organiser %}
    <p>
        <a href="{% url 'webapp:edit_event' event.id %}">Edit</a>
        <a href="{% url 'webapp:delete_event' event.id %}">Delete</a>
    </p>
{% endif %}

<p><a href="{% url 'webapp:home' %}">‚Üê Back to Home</a></p>


<h3>Reviews</h3>
{% if reviews %}
    {% for review in reviews %}
        <div style="margin-bottom: 10px;">
            <strong>{{ review.user.username }}</strong> ({{ review.timestamp|date:"Y-m-d H:i" }})<br>
            {{ review.message }}
        </div>
    {% endfor %}
{% else %}
    <p>No reviews yet.</p>
{% endif %}

{% if user.is_authenticated and user.role == 'user' %}
    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">Submit Review</button>
    </form>
{% endif %}

{% endblock %}


