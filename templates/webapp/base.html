<!DOCTYPE html>
{% load staticfiles %}

<html>

<head lang="en">

<meta charset="UTF-8" />
<title>EventConnect - {% block title_block %}Welcome to EventConnect{% endblock %}</title>

</head>


<!-- The JS for autocomplete search -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
$(document).ready(function () {
    $("#searchInput").on("input", function () {
        let query = $(this).val();

        if (query.length > 0) {
            $.ajax({
                url: "{% url 'webapp:autocomplete_events' %}",
                data: { 'term': query },
                dataType: 'json',
                success: function (data) {
                    let resultsDiv = $("#autocomplete-results");
                    resultsDiv.empty();

                    if (data.length > 0) {
                        data.forEach(function (item) {
                            resultsDiv.append('<div class="suggestion-item" style="padding: 5px; cursor: pointer;">' + item.title + '</div>');
                        });
                        resultsDiv.show();
                    } else {
                        resultsDiv.hide();
                    }
                }
            });
        } else {
            $("#autocomplete-results").hide();
        }
    });

    $(document).on("click", ".suggestion-item", function () {
        $("#searchInput").val($(this).text());
        $("#autocomplete-results").hide();
    });
});
</script>
<!-- The JS for autocomplete search -->


<body>
    <div class="topnav">
        {% if user.is_authenticated %}
            <a href="{% url 'webapp:home' %}">Home</a>
            {% if user.role == 'organiser' %}
                <a href="{% url 'webapp:organiser_account' %}">Admin</a>
            {% endif %}
            {% if user.role == 'user' %}
              <a href="{% url 'webapp:notifications' %}">Notifications</a>
            {% endif %}
            <a href="{% url 'webapp:qa' %}">Q&A Forum</a>
            <a href="{% url 'webapp:logout' %}">Logout</a>
        {% else %}
            <a href="{% url 'webapp:login' %}">Login</a>
            <a href="{% url 'webapp:signup' %}">Sign Up</a>
            <a href="{% url 'webapp:home' %}">Home</a>
        {% endif %}
    </div>

    <h1>EventConnect</h1>

    {% block body_block %}
    {% endblock %}

    <div class="bottomnav">
        {% if show_contact_button %}
             <a href="{% url 'webapp:contact' %}" class="btn btn-outline-info">Contact Us</a>
        {% endif %}
    </div>

    {% block extra_scripts %}
    {% endblock %}
</body>
</html>

