{% extends 'webapp/base.html' %}

{% block title_block %}
    {{ event.title }} - Event Details
{% endblock %}

{% block body_block %}
{% if event.event_image %}
    <img src="{{ event.event_image.url }}" alt="{{ event.title }}" style="width: 400px; height: 300px;">
{% endif %}
<h1>{{ event.title }}</h1>
<p>{{ event.description }}</p>
<p>Date: {{ event.date }}</p>
<p>Location: {{ event.location }}</p>
<p>Category: {{ event.category.name }}</p>

{% if user.is_authenticated %}
    <form method="post" action="{% url 'webapp:event_signup' event.id %}">
        {% csrf_token %}
        <button type="submit">Sign Up for This Event</button>
    </form>
{% else %}
    <p>You must be logged in to sign up for this event.</p>
{% endif %}

<h3>Comments</h3>

{% if comments %}
    <ul>
        {% for comment in comments %}
            <li>{{ comment.user.username }}: {{ comment.comment }}</li>
        {% endfor %}
    </ul>
{% else %}
    <p>No comments yet.</p>
{% endif %}

{% if user.is_authenticated %}
    <form method="post" action="{% url 'webapp:add_comment' event.id %}">
        {% csrf_token %}
        <textarea name="comment" required></textarea>
        <button type="submit">Post Comment</button>
    </form>
{% else %}
    <p>You must be logged in to leave a comment.</p>
{% endif %}

{% endblock %}